<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daily Planner</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f4f9;
    margin: 0;
    padding: 20px;
    color: #333;
}
.planner { display: grid; grid-template-columns: 1fr; grid-gap: 20px; }
.months-row { display: flex; flex-wrap: wrap; margin-bottom: 20px; }
.month { padding: 6px 14px; background: #4CAF50; color: white; margin: 3px; border-radius: 5px; cursor: pointer; font-weight: bold; }
.month:hover { background: #45a049; }
.month.active { background: #2196F3; }
.planner-left { background: white; padding: 20px; border-radius: 12px; box-shadow: 0px 3px 15px rgba(0,0,0,0.1); }
.section { margin-bottom: 20px; }
.section h3 { margin-bottom: 10px; color: #4CAF50; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
.flex-row { display: flex; gap: 10px; }
.flex-row .mini-section { flex: 1; }
input, textarea, select { width: 100%; padding: 8px; margin-bottom: 5px; border-radius: 6px; border: 1px solid #ccc; box-sizing: border-box; }
.water-boxes-horizontal { display: flex; gap: 5px; align-items: center; margin-top: 5px; }
textarea { resize: none; }
button { padding: 10px 20px; margin-top: 10px; margin-right: 10px; border-radius: 6px; border: none; cursor: pointer; background: #4CAF50; color: white; font-weight: bold; }
#top-controls { display: flex; justify-content: space-between; margin-bottom: 15px; align-items: center; flex-wrap: wrap; gap: 10px; }
#current-date { display: flex; align-items: center; gap: 8px; font-size: 18px; font-weight: bold; }
#day-select { width: auto; padding: 5px 8px; border-radius: 6px; border: 1px solid #ccc; font-weight: bold; }

/* Habit + Quote + Notes layout */
.habit-quote-row {
    display: flex;
    gap: 20px;
    align-items: flex-start;
}
#habit-section { flex: 1; }
#quote-notes-wrap { flex: 1; display: flex; flex-direction: column; gap: 20px; }

/* Report Modal */
#reportModal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.6);
    justify-content: center;
    align-items: center;
    z-index: 1000;
}
#reportContent {
    background: white;
    padding: 20px;
    border-radius: 10px;
    width: 90%;
    max-height: 80vh;
    overflow: auto;
}
#reportTable {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
}
#reportTable th, #reportTable td {
    border: 1px solid #ddd;
    padding: 6px;
    text-align: left;
}
#reportTable th {
    background: #4CAF50;
    color: white;
    position: sticky;
    top: 0;
}
#closeReport {
    float: right;
    background: #f44336;
}
</style>
</head>
<body>

<div class="planner">
    <a href="https://ramauro.pages.dev"> Home </a>
    <!-- MONTHS ROW -->
    <div class="months-row">
        <div class="month" onclick="showMonth(0, this)">Jan</div>
        <div class="month" onclick="showMonth(1, this)">Feb</div>
        <div class="month" onclick="showMonth(2, this)">Mar</div>
        <div class="month" onclick="showMonth(3, this)">Apr</div>
        <div class="month" onclick="showMonth(4, this)">May</div>
        <div class="month" onclick="showMonth(5, this)">Jun</div>
        <div class="month" onclick="showMonth(6, this)">Jul</div>
        <div class="month" onclick="showMonth(7, this)">Aug</div>
        <div class="month" onclick="showMonth(8, this)">Sep</div>
        <div class="month" onclick="showMonth(9, this)">Oct</div>
        <div class="month" onclick="showMonth(10, this)">Nov</div>
        <div class="month" onclick="showMonth(11, this)">Dec</div>
    </div>

    <!-- LEFT PLANNER -->
    <div class="planner-left">

        <!-- Top Controls -->
        <div id="top-controls">
            <div id="current-date">
                Date:
                <select id="day-select" onchange="openDay(parseInt(this.value))"></select>
            </div>
            <div>
                <button onclick="savePlanner()">Save</button>
                <input type="file" id="openFile" onchange="openPlanner(event)" style="display:none;">
                <button onclick="document.getElementById('openFile').click()">Open</button>
                <button onclick="generateReport()">Report</button>
            </div>
        </div>

        <!-- To-Do, Goals, Reminder -->
        <div class="flex-row">
            <div class="section mini-section">
                <h3>To-Do</h3>
                <input type="text" id="todo1" placeholder="Task 1">
                <input type="text" id="todo2" placeholder="Task 2">
                <input type="text" id="todo3" placeholder="Task 3">
            </div>
            <div class="section mini-section">
                <h3>Goals</h3>
                <input type="text" id="goal1" placeholder="Goal 1">
                <input type="text" id="goal2" placeholder="Goal 2">
                <input type="text" id="goal3" placeholder="Goal 3">
            </div>
            <div class="section mini-section">
                <h3>Reminders</h3>
                <input type="text" id="reminder1" placeholder="Reminder 1">
                <input type="text" id="reminder2" placeholder="Reminder 2">
                <input type="text" id="reminder3" placeholder="Reminder 3">
            </div>
        </div>

        <!-- Health & Meals -->
        <div class="flex-row">
            <div class="section mini-section">
                <h3>Health & Exercise</h3>
                <input type="text" id="exercise" placeholder="Exercise (min)">
                <input type="text" id="steps" placeholder="Steps">
                <input type="text" id="sleep" placeholder="Sleep (hrs)">
                <input type="text" id="bp" placeholder="BP Reading (e.g. 120/80)">
                <input type="text" id="sugar" placeholder="Sugar Reading (mg/dL)">
            </div>
            <div class="section mini-section">
                <h3>Meals Tracker & Water</h3>
                <input type="text" id="breakfast" placeholder="Breakfast">
                <input type="text" id="lunch" placeholder="Lunch">
                <input type="text" id="dinner" placeholder="Dinner">
                <input type="text" id="snacks" placeholder="Snacks">
                <div class="water-boxes-horizontal" id="water-section">
                    <label>Water:</label>
                </div>
            </div>
        </div>

        <!-- Habits + Quote/Notes -->
        <div class="habit-quote-row">
            <div class="section" id="habit-section">
                <h3>Habits</h3>
                <div id="habit-list"></div>
            </div>
            <div id="quote-notes-wrap">
                <div class="section">
                    <h3>Quote / Motivation</h3>
                    <textarea id="quote" rows="3" placeholder="Daily Quote"></textarea>
                </div>
                <div class="section">
                    <h3>Notes</h3>
                    <textarea id="notes" rows="3" placeholder="Notes..."></textarea>
                </div>
            </div>
        </div>

    </div>
</div>

<!-- Report Modal -->
<div id="reportModal">
    <div id="reportContent">
        <button id="closeReport" onclick="closeReport()">Close</button>
        <h2>Yearly Report</h2>
        <table id="reportTable"></table>
    </div>
</div>

<script>
const daysInMonth = [31,28,31,30,31,30,31,31,30,31,30,31];
const habits = ["Meditation","Read","Walk","No Sugar"];
let currentMonthIndex = new Date().getMonth();
let currentDay = new Date().getDate();
let currentYear = new Date().getFullYear();
let plannerData = {};

function loadHabits(){
    const habitList = document.getElementById('habit-list');
    habitList.innerHTML = '';
    habits.forEach((h,index)=>{
        const div = document.createElement('div');
        div.innerHTML = `<input type="checkbox" id="habit${index}"> <label for="habit${index}">${h}</label>`;
        habitList.appendChild(div);
    });
}

function loadWaterBoxes(){
    const waterDiv = document.getElementById('water-section');
    for (let i = 1; i <= 10; i++) {
        const input = document.createElement('input');
        input.type = 'checkbox';
        input.id = 'water' + i;
        waterDiv.appendChild(input);
    }
}

function populateDayDropdown(monthIndex) {
    const select = document.getElementById("day-select");
    select.innerHTML = "";
    const totalDays = daysInMonth[monthIndex];
    for (let i = 1; i <= totalDays; i++) {
        const date = new Date(currentYear, monthIndex, i);
        const weekday = date.toLocaleDateString("en-US", { weekday: "short" });
        const monthName = date.toLocaleDateString("en-US", { month: "short" });
        const fullText = `${weekday}, ${i} ${monthName} ${currentYear}`;
        const option = document.createElement("option");
        option.value = i;
        option.textContent = fullText;
        if (i === currentDay) option.selected = true;
        select.appendChild(option);
    }
}

function showMonth(monthIndex, element){
    currentMonthIndex = monthIndex;
    document.querySelectorAll('.month').forEach(m => m.classList.remove('active'));
    element.classList.add('active');
    populateDayDropdown(monthIndex);
    openDay(currentDay);
}

function openDay(day){
    currentDay = day;
    document.getElementById('day-select').value = day;
    const key = `${currentYear}-${currentMonthIndex}-${day}`;
    const data = plannerData[key] || {};

    const fields = ['todo1','todo2','todo3','goal1','goal2','goal3','reminder1','reminder2','reminder3',
                    'exercise','steps','sleep','bp','sugar','breakfast','lunch','dinner','snacks','quote','notes'];
    fields.forEach(id => document.getElementById(id).value = data[id] || '');

    for(let i=1;i<=10;i++) document.getElementById('water'+i).checked = data['water'+i] || false;
    habits.forEach((h,i)=>document.getElementById('habit'+i).checked = data['habit'+i] || false);
}

function savePlanner(){
    const key = `${currentYear}-${currentMonthIndex}-${currentDay}`;
    plannerData[key] = {};
    const fields = ['todo1','todo2','todo3','goal1','goal2','goal3','reminder1','reminder2','reminder3',
                    'exercise','steps','sleep','bp','sugar','breakfast','lunch','dinner','snacks','quote','notes'];
    fields.forEach(id => plannerData[key][id] = document.getElementById(id).value);

    for(let i=1;i<=10;i++) plannerData[key]['water'+i] = document.getElementById('water'+i).checked;
    habits.forEach((h,i)=>plannerData[key]['habit'+i] = document.getElementById('habit'+i).checked);

    const dataStr = "data:text/plain;charset=utf-8," + encodeURIComponent(JSON.stringify(plannerData));
    const a = document.createElement('a');
    a.href = dataStr;
    a.download = "Daily_Planner.txt";
    document.body.appendChild(a);
    a.click();
    a.remove();
}

function openPlanner(e){
    const file = e.target.files[0];
    const reader = new FileReader();
    reader.onload = function(evt){
        plannerData = JSON.parse(evt.target.result);
        openDay(currentDay);
        alert("Planner loaded!");
    };
    reader.readAsText(file);
}

function generateReport(){
    const modal = document.getElementById("reportModal");
    const table = document.getElementById("reportTable");
    table.innerHTML = "";

    const headers = ["Date","ToDo1","ToDo2","ToDo3","Goal1","Goal2","Goal3","Exercise","Steps","Sleep","BP","Sugar","Breakfast","Lunch","Dinner","Snacks","Quote","Notes","Habits","Water"];
    const thead = document.createElement("thead");
    const headerRow = document.createElement("tr");
    headers.forEach(h => {
        const th = document.createElement("th");
        th.textContent = h;
        headerRow.appendChild(th);
    });
    thead.appendChild(headerRow);
    table.appendChild(thead);

    const tbody = document.createElement("tbody");

    const sortedKeys = Object.keys(plannerData).sort((a,b)=>{
        const [ya,ma,da] = a.split("-").map(Number);
        const [yb,mb,db] = b.split("-").map(Number);
        const daObj = new Date(ya, ma, da);
        const dbObj = new Date(yb, mb, db);
        return daObj - dbObj;
    });

    sortedKeys.forEach(key=>{
        const [year,month,day] = key.split("-");
        const data = plannerData[key];
        const tr = document.createElement("tr");
        const date = new Date(year, month, day);
        const dateText = date.toLocaleDateString("en-US", { weekday:"short", day:"numeric", month:"short", year:"numeric" });

        const habitSummary = habits.map((h,i)=> data['habit'+i] ? h : "").filter(Boolean).join(", ");
        const waterCount = Array.from({length:10}).filter((_,i)=>data['water'+(i+1)]).length;

        const cells = [
            dateText,
            data.todo1||"", data.todo2||"", data.todo3||"",
            data.goal1||"", data.goal2||"", data.goal3||"",
            data.exercise||"", data.steps||"", data.sleep||"",
            data.bp||"", data.sugar||"",
            data.breakfast||"", data.lunch||"", data.dinner||"", data.snacks||"",
            data.quote||"", data.notes||"",
            habitSummary, `${waterCount}/10`
        ];
        cells.forEach(c=>{
            const td = document.createElement("td");
            td.textContent = c;
            tr.appendChild(td);
        });
        tbody.appendChild(tr);
    });
    table.appendChild(tbody);
    modal.style.display = "flex";
}

function closeReport(){
    document.getElementById("reportModal").style.display = "none";
}

// Initialize
loadHabits();
loadWaterBoxes();
document.querySelectorAll('.month')[currentMonthIndex].click();
</script>

</body>
</html>



